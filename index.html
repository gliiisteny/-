<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>لعبة المسابقات</title>
    <style>
        body {
            margin: 0;
            padding: 0;
            font-family: Arial, sans-serif;
            background-color: #f97316; /* لون برتقالي */
            height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
        }
        .card {
            padding: 1.5rem;
            background-color: white;
            color: black;
            text-align: center;
            border-radius: 8px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }
        .button {
            padding: 0.5rem 1rem;
            margin: 0.25rem;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            background-color: #3b82f6; /* أزرق */
            color: white;
        }
        .button:hover {
            background-color: #2563eb;
        }
        .button:disabled {
            background-color: #9ca3af;
            cursor: not-allowed;
        }
        .button-green {
            background-color: #22c55e;
        }
        .button-gray {
            background-color: #d1d5db;
        }
        .input {
            padding: 0.5rem;
            margin: 0.5rem 0;
            width: 100%;
            box-sizing: border-box;
            border: 1px solid #d1d5db;
            border-radius: 4px;
        }
        .grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 0.5rem;
        }
        .question-card {
            position: absolute;
            width: 50%;
            border: 4px solid #ef4444;
        }
        .timer {
            color: #ef4444;
            text-align: right;
            font-size: 0.875rem;
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <!-- إضافة مكتبات React عبر CDN -->
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/babel-standalone@6/babel.min.js"></script>

    <!-- الكود الخاص بالمكون -->
    <script type="text/babel">
        function QuizGame() {
            const [screen, setScreen] = React.useState("start");
            const [teams, setTeams] = React.useState({ left: "", right: "" });
            const [competitionName, setCompetitionName] = React.useState("");
            const [selectedCategories, setSelectedCategories] = React.useState([]);
            const [selectedQuestion, setSelectedQuestion] = React.useState(null);
            const [score, setScore] = React.useState({ left: 0, right: 0 });
            const [timeLeft, setTimeLeft] = React.useState(120);
            const [showAnswer, setShowAnswer] = React.useState(false);
            const [answeredQuestions, setAnsweredQuestions] = React.useState({});

            const allCategories = [
                "كرة القدم", "القرآن الكريم", "التاريخ الإسلامي", "شخصيات تاريخية",
                "أفلام", "مسلسلات", "عواصم", "دول", "معلومات عامة", "ألغاز", "حيوانات"
            ];

            const points = [100, 200, 300, 400];

            React.useEffect(() => {
                if (selectedQuestion && timeLeft > 0) {
                    const timer = setInterval(() => setTimeLeft(timeLeft - 1), 1000);
                    return () => clearInterval(timer);
                }
            }, [selectedQuestion, timeLeft]);

            return (
                <div>
                    {screen === "start" && (
                        <div className="card">
                            <button className="button" onClick={() => setScreen("setup")}>
                                البدء
                            </button>
                        </div>
                    )}

                    {screen === "setup" && (
                        <div className="card" style={{ width: "75%" }}>
                            <div style={{ display: "flex", flexDirection: "column", gap: "1rem" }}>
                                <input
                                    type="text"
                                    placeholder="اسم الفريق الأول"
                                    className="input"
                                    onChange={(e) => setTeams({ ...teams, left: e.target.value })}
                                />
                                <input
                                    type="text"
                                    placeholder="اسم الفريق الثاني"
                                    className="input"
                                    onChange={(e) => setTeams({ ...teams, right: e.target.value })}
                                />
                                <input
                                    type="text"
                                    placeholder="اسم المسابقة"
                                    className="input"
                                    onChange={(e) => setCompetitionName(e.target.value)}
                                />
                                <div className="grid">
                                    {allCategories.map((cat, index) => (
                                        <button
                                            key={index}
                                            className={`button ${selectedCategories.includes(cat) ? 'button-green' : 'button-gray'}`}
                                            onClick={() => {
                                                if (selectedCategories.includes(cat)) {
                                                    setSelectedCategories(selectedCategories.filter(c => c !== cat));
                                                } else if (selectedCategories.length < 6) {
                                                    setSelectedCategories([...selectedCategories, cat]);
                                                }
                                            }}
                                        >
                                            {cat}
                                        </button>
                                    ))}
                                </div>
                                {selectedCategories.length === 0 && (
                                    <p style={{ color: "#ef4444" }}>يرجى اختيار فئة واحدة على الأقل</p>
                                )}
                                {selectedCategories.length > 0 && (
                                    <button
                                        className="button"
                                        onClick={() => setScreen("questions")}
                                    >
                                        الانطلاق
                                    </button>
                                )}
                            </div>
                        </div>
                    )}

                    {screen === "questions" && (
                        <div className="card" style={{ width: "75%" }}>
                            <div className="grid" style={{ gridTemplateColumns: "repeat(2, 1fr)" }}>
                                {selectedCategories.map((cat, index) => (
                                    <div key={index} style={{ border: "1px solid #d1d5db", padding: "0.5rem", textAlign: "center" }}>
                                        <p style={{ fontWeight: "bold", marginBottom: "0.25rem" }}>{cat}</p>
                                        <div className="grid" style={{ gridTemplateColumns: "repeat(2, 1fr)", gap: "0.25rem" }}>
                                            {points.map((pt, i) => (
                                                <button
                                                    key={i}
                                                    className={`button ${answeredQuestions[`${cat}-${pt}`] ? 'button-gray' : ''}`}
                                                    disabled={answeredQuestions[`${cat}-${pt}`]}
                                                    onClick={() => {
                                                        setSelectedQuestion({
                                                            category: cat,
                                                            points: pt,
                                                            question: "مثال على السؤال؟",
                                                            answer: "الإجابة هنا"
                                                        });
                                                        setTimeLeft(120);
                                                        setShowAnswer(false);
                                                        setAnsweredQuestions({ ...answeredQuestions, [`${cat}-${pt}`]: true });
                                                        setScreen("question");
                                                    }}
                                                >
                                                    {pt}
                                                </button>
                                            ))}
                                        </div>
                                    </div>
                                ))}
                            </div>
                        </div>
                    )}

                    {screen === "question" && selectedQuestion && (
                        <div className="card question-card">
                            <p style={{ textAlign: "center", marginBottom: "0.5rem" }}>
                                {showAnswer ? selectedQuestion.answer : selectedQuestion.question}
                            </p>
                            <p className="timer">⏳ {timeLeft} ثانية</p>
                            {!showAnswer ? (
                                <button
                                    className="button"
                                    onClick={() => setShowAnswer(true)}
                                >
                                    اظهر الإجابة
                                </button>
                            ) : (
                                <div style={{ display: "flex", justifyContent: "space-between", marginTop: "0.5rem" }}>
                                    <button
                                        className="button"
                                        onClick={() => setScore({ ...score, left: score.left + selectedQuestion.points })}
                                    >
                                        {teams.left}
                                    </button>
                                    <button
                                        className="button"
                                        onClick={() => setScore({ ...score, right: score.right + selectedQuestion.points })}
                                    >
                                        {teams.right}
                                    </button>
                                </div>
                            )}
                            <button
                                className="button"
                                style={{ marginTop: "0.5rem" }}
                                onClick={() => setScreen("questions")}
                            >
                                العودة
                            </button>
                        </div>
                    )}
                </div>
            );
        }

        // رندر المكون في الصفحة
        ReactDOM.render(<QuizGame />, document.getElementById('root'));
    </script>
</body>
</html>